<head>
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""
  />
  <script
    src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""
  ></script>
</head>
<body>
  <div id="mapid" style="width:1600px; height: 1000px; position: relative;"></div>
  <script type="text/javascript">
    var mymap = L.map("mapid").setView([0, 121.47], 2);
    L.tileLayer(
      "https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",
      {
        maxZoom: 18,
        minZoom: 2,
        id: "mapbox/streets-v11",
        tileSize: 512,
        zoomOffset: -1,
        accessToken: "pk.eyJ1Ijoiemhhb3ppcWlhbiIsImEiOiJja3gxdTFycXYwZm50Mm51cXJkdGtkdnR1In0.0eVCxKuvs2W_KiFjI5V4Vg",
      }
    ).addTo(mymap);

    var points=[];
    var pointGroup=L.layerGroup([]);
    var areas=[];
    var areaGroup=L.layerGroup([]);

    function setPoints(arr){
        pointGroup.clearLayers();
        points=[];
        for (var i=0;i<arr.length;i++){
            var point = L.circleMarker([arr[i][0],arr[i][1]],{
                color : 'white',
                opacity: 0.5,
                weight : 1,
                fillColor : 'red',
                fillOpacity : 0.7,
                radius : arr[i][2],
            });
            point.bindPopup("location id "+arr[i][3]+"<br>checking-ins count "+arr[i][4]);
            points.push(point);
        }
        pointGroup=L.layerGroup(points);
        mymap.addLayer(pointGroup);
    }

    function setArea(minLat,maxLat,minLng,maxLng){
        areaGroup.clearLayers();
        areas=[];
        if (minLat>maxLat||minLng>maxLng){
            return;
        }
        var area = L.rectangle([
            [minLat,minLng],
            [maxLat,maxLng],
        ],{
            color : 'blue',
            weight : 2,
            fill : false,
        });
        areas.push(area);
        areaGroup=L.layerGroup(areas);
        mymap.addLayer(areaGroup);
    }
  </script>
</body>
